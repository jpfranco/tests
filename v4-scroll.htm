<!DOCTYPE html>
<html amp>
<head>
  <title>Ooyala Video Test</title>
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  <style>
    #container {
      width: 360px;
      margin: 20px auto;
    }
    p {
      margin-left: auto;
      margin-right: auto;
      max-width: 500px;
    }
  </style>
</head>
<body>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus congue, odio eget faucibus fringilla, massa urna interdum ipsum, id pellentesque purus erat quis quam. Nulla a leo nec mi consectetur aliquam. Aliquam et venenatis orci. Donec quis sapien nec ex placerat dictum. Proin vel ipsum ligula. Duis vitae odio ante. Donec vel augue eu libero posuere vestibulum quis et velit. Pellentesque et ipsum lacinia, euismod massa ut, dignissim nibh. Donec ac mi nisl. Pellentesque blandit turpis ex, eget malesuada lectus fermentum at. Vivamus bibendum efficitur lorem, ut sodales metus blandit eu. In et mi odio. Nulla facilisi. Quisque varius posuere dictum.
  </p>
  <p>
    Donec porttitor ac purus cursus ullamcorper. Aenean tempor enim hendrerit dolor porttitor, id pulvinar ligula aliquam. Duis vulputate massa non imperdiet luctus. Maecenas porttitor vestibulum fringilla. Nulla interdum purus sed metus auctor sodales. Vestibulum sed quam sed risus feugiat ultricies quis non mauris. In hac habitasse platea dictumst. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec tristique venenatis congue. Nunc congue justo eget mi semper placerat. In non magna ligula. Ut sollicitudin magna in purus dapibus elementum sed et nisi. Cras et tortor porta, egestas orci vitae, faucibus dolor. Pellentesque imperdiet, magna nec congue viverra, nulla ipsum ornare lorem, vitae hendrerit dui tortor a eros. Praesent auctor congue sodales. Praesent vel eros id justo aliquam tempor eget at est.
  </p>
  <p>
    Nunc sapien massa, porta vitae tortor quis, dapibus mattis sapien. Praesent in nulla venenatis, pharetra urna venenatis, laoreet neque. Donec blandit libero quis molestie blandit. Duis lobortis, ipsum sed efficitur rhoncus, metus quam interdum dolor, quis laoreet turpis ex eu tellus. Vestibulum non est viverra, ultrices erat in, placerat lacus. Ut lobortis laoreet faucibus. Vestibulum est risus, congue eget dictum in, condimentum vel nunc. Aenean fermentum sem nisl, vel ornare arcu tristique eget. Nam posuere dapibus posuere. Integer convallis aliquam elementum. Cras feugiat porttitor ex, sit amet pulvinar metus suscipit eu. Nam tempor semper mollis. Sed eget ligula at augue vestibulum eleifend.
  </p>
  <p>
    Maecenas nec dolor vitae nisi egestas elementum. Morbi sit amet ante purus. Quisque eleifend turpis quis iaculis gravida. Fusce imperdiet vestibulum nisi id auctor. Mauris lacinia gravida lectus. Nam consequat rhoncus dapibus. Nullam venenatis sollicitudin dictum. Fusce molestie ut leo sit amet lacinia. Integer a lacus orci. In viverra, dui sit amet molestie vulputate, nunc mi ultricies sem, ut volutpat turpis enim et tortor. Morbi ullamcorper ligula non quam gravida dictum. Donec at gravida purus. Pellentesque condimentum porttitor sem vel euismod. Morbi faucibus porttitor commodo. Nulla facilisi.
  </p>
  <p>
    Nunc quis porta ligula. Vivamus ligula eros, vehicula id pretium a, sagittis quis tellus. Sed mauris odio, egestas ut laoreet eu, laoreet at massa. Integer elementum diam at metus congue hendrerit. Mauris vel neque a arcu vehicula consectetur. Quisque sit amet risus lacinia, fermentum odio ut, mollis arcu. Interdum et malesuada fames ac ante ipsum primis in faucibus. Duis viverra sollicitudin imperdiet. Duis viverra luctus ante id venenatis. Nunc sit amet consectetur nulla. Sed varius risus quis tortor dapibus, sit amet auctor est ornare. Aenean venenatis in libero quis venenatis. Sed a fermentum turpis. Pellentesque suscipit cursus facilisis. Vestibulum at metus nec libero volutpat sodales.
  </p>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus congue, odio eget faucibus fringilla, massa urna interdum ipsum, id pellentesque purus erat quis quam. Nulla a leo nec mi consectetur aliquam. Aliquam et venenatis orci. Donec quis sapien nec ex placerat dictum. Proin vel ipsum ligula. Duis vitae odio ante. Donec vel augue eu libero posuere vestibulum quis et velit. Pellentesque et ipsum lacinia, euismod massa ut, dignissim nibh. Donec ac mi nisl. Pellentesque blandit turpis ex, eget malesuada lectus fermentum at. Vivamus bibendum efficitur lorem, ut sodales metus blandit eu. In et mi odio. Nulla facilisi. Quisque varius posuere dictum.
  </p>
  <p>
    Donec porttitor ac purus cursus ullamcorper. Aenean tempor enim hendrerit dolor porttitor, id pulvinar ligula aliquam. Duis vulputate massa non imperdiet luctus. Maecenas porttitor vestibulum fringilla. Nulla interdum purus sed metus auctor sodales. Vestibulum sed quam sed risus feugiat ultricies quis non mauris. In hac habitasse platea dictumst. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec tristique venenatis congue. Nunc congue justo eget mi semper placerat. In non magna ligula. Ut sollicitudin magna in purus dapibus elementum sed et nisi. Cras et tortor porta, egestas orci vitae, faucibus dolor. Pellentesque imperdiet, magna nec congue viverra, nulla ipsum ornare lorem, vitae hendrerit dui tortor a eros. Praesent auctor congue sodales. Praesent vel eros id justo aliquam tempor eget at est.
  </p>
  <p>
    Nunc sapien massa, porta vitae tortor quis, dapibus mattis sapien. Praesent in nulla venenatis, pharetra urna venenatis, laoreet neque. Donec blandit libero quis molestie blandit. Duis lobortis, ipsum sed efficitur rhoncus, metus quam interdum dolor, quis laoreet turpis ex eu tellus. Vestibulum non est viverra, ultrices erat in, placerat lacus. Ut lobortis laoreet faucibus. Vestibulum est risus, congue eget dictum in, condimentum vel nunc. Aenean fermentum sem nisl, vel ornare arcu tristique eget. Nam posuere dapibus posuere. Integer convallis aliquam elementum. Cras feugiat porttitor ex, sit amet pulvinar metus suscipit eu. Nam tempor semper mollis. Sed eget ligula at augue vestibulum eleifend.
  </p>
  <p>
    Maecenas nec dolor vitae nisi egestas elementum. Morbi sit amet ante purus. Quisque eleifend turpis quis iaculis gravida. Fusce imperdiet vestibulum nisi id auctor. Mauris lacinia gravida lectus. Nam consequat rhoncus dapibus. Nullam venenatis sollicitudin dictum. Fusce molestie ut leo sit amet lacinia. Integer a lacus orci. In viverra, dui sit amet molestie vulputate, nunc mi ultricies sem, ut volutpat turpis enim et tortor. Morbi ullamcorper ligula non quam gravida dictum. Donec at gravida purus. Pellentesque condimentum porttitor sem vel euismod. Morbi faucibus porttitor commodo. Nulla facilisi.
  </p>
  <p>
    Nunc quis porta ligula. Vivamus ligula eros, vehicula id pretium a, sagittis quis tellus. Sed mauris odio, egestas ut laoreet eu, laoreet at massa. Integer elementum diam at metus congue hendrerit. Mauris vel neque a arcu vehicula consectetur. Quisque sit amet risus lacinia, fermentum odio ut, mollis arcu. Interdum et malesuada fames ac ante ipsum primis in faucibus. Duis viverra sollicitudin imperdiet. Duis viverra luctus ante id venenatis. Nunc sit amet consectetur nulla. Sed varius risus quis tortor dapibus, sit amet auctor est ornare. Aenean venenatis in libero quis venenatis. Sed a fermentum turpis. Pellentesque suscipit cursus facilisis. Vestibulum at metus nec libero volutpat sodales.
  </p>
  <div id="container">
    <amp-iframe width="360" height="270"
      sandbox="allow-scripts allow-same-origin"
      layout="responsive"
      frameborder="0"
      src="https://10.11.65.41:9876/v4-scroll-iframe.htm">
    </amp-iframe>
  </div>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus congue, odio eget faucibus fringilla, massa urna interdum ipsum, id pellentesque purus erat quis quam. Nulla a leo nec mi consectetur aliquam. Aliquam et venenatis orci. Donec quis sapien nec ex placerat dictum. Proin vel ipsum ligula. Duis vitae odio ante. Donec vel augue eu libero posuere vestibulum quis et velit. Pellentesque et ipsum lacinia, euismod massa ut, dignissim nibh. Donec ac mi nisl. Pellentesque blandit turpis ex, eget malesuada lectus fermentum at. Vivamus bibendum efficitur lorem, ut sodales metus blandit eu. In et mi odio. Nulla facilisi. Quisque varius posuere dictum.
  </p>
  <p>
    Donec porttitor ac purus cursus ullamcorper. Aenean tempor enim hendrerit dolor porttitor, id pulvinar ligula aliquam. Duis vulputate massa non imperdiet luctus. Maecenas porttitor vestibulum fringilla. Nulla interdum purus sed metus auctor sodales. Vestibulum sed quam sed risus feugiat ultricies quis non mauris. In hac habitasse platea dictumst. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec tristique venenatis congue. Nunc congue justo eget mi semper placerat. In non magna ligula. Ut sollicitudin magna in purus dapibus elementum sed et nisi. Cras et tortor porta, egestas orci vitae, faucibus dolor. Pellentesque imperdiet, magna nec congue viverra, nulla ipsum ornare lorem, vitae hendrerit dui tortor a eros. Praesent auctor congue sodales. Praesent vel eros id justo aliquam tempor eget at est.
  </p>
  <p>
    Nunc sapien massa, porta vitae tortor quis, dapibus mattis sapien. Praesent in nulla venenatis, pharetra urna venenatis, laoreet neque. Donec blandit libero quis molestie blandit. Duis lobortis, ipsum sed efficitur rhoncus, metus quam interdum dolor, quis laoreet turpis ex eu tellus. Vestibulum non est viverra, ultrices erat in, placerat lacus. Ut lobortis laoreet faucibus. Vestibulum est risus, congue eget dictum in, condimentum vel nunc. Aenean fermentum sem nisl, vel ornare arcu tristique eget. Nam posuere dapibus posuere. Integer convallis aliquam elementum. Cras feugiat porttitor ex, sit amet pulvinar metus suscipit eu. Nam tempor semper mollis. Sed eget ligula at augue vestibulum eleifend.
  </p>
  <p>
    Maecenas nec dolor vitae nisi egestas elementum. Morbi sit amet ante purus. Quisque eleifend turpis quis iaculis gravida. Fusce imperdiet vestibulum nisi id auctor. Mauris lacinia gravida lectus. Nam consequat rhoncus dapibus. Nullam venenatis sollicitudin dictum. Fusce molestie ut leo sit amet lacinia. Integer a lacus orci. In viverra, dui sit amet molestie vulputate, nunc mi ultricies sem, ut volutpat turpis enim et tortor. Morbi ullamcorper ligula non quam gravida dictum. Donec at gravida purus. Pellentesque condimentum porttitor sem vel euismod. Morbi faucibus porttitor commodo. Nulla facilisi.
  </p>
  <p>
    Nunc quis porta ligula. Vivamus ligula eros, vehicula id pretium a, sagittis quis tellus. Sed mauris odio, egestas ut laoreet eu, laoreet at massa. Integer elementum diam at metus congue hendrerit. Mauris vel neque a arcu vehicula consectetur. Quisque sit amet risus lacinia, fermentum odio ut, mollis arcu. Interdum et malesuada fames ac ante ipsum primis in faucibus. Duis viverra sollicitudin imperdiet. Duis viverra luctus ante id venenatis. Nunc sit amet consectetur nulla. Sed varius risus quis tortor dapibus, sit amet auctor est ornare. Aenean venenatis in libero quis venenatis. Sed a fermentum turpis. Pellentesque suscipit cursus facilisis. Vestibulum at metus nec libero volutpat sodales.
  </p>
  <script>
    var playerContainer = document.getElementById('container');

    var onScroll = function(e) {
      var threshold = window.scrollY + window.innerHeight;

      if (playerContainer.offsetTop < threshold) {
        console.log(">>>>Scrolled to video");
        tryPlayIframeVideo();
      }
    };

    var tryPlayIframeVideo = function() {
      var iframe = document.querySelector('#container iframe');
      // Note that the iframe might not have finished loading by the time
      // it is scrolled into view.
      if (iframe && iframe.contentWindow && iframe.contentWindow.postMessage) {
        iframe.contentWindow.postMessage({
          action: 'play'
        }, '*'); // This should be changed to the domain of the iframe instead of  '*'
        window.removeEventListener('scroll', onScroll);
      }
    };
    window.addEventListener('scroll', onScroll);
  </script>
</body>
</html>
